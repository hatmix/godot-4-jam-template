# Godot 4 Jam Template

Quick start template for game jams built on [hatmix/godot-4-ci](https://github.com/hatmix/godot-4-ci). See the plain template in action at [https://hatmix.itch.io/godot-4-jam-template](https://hatmix.itch.io/godot-4-jam-template) (password `hatmix`).

Features:
* Github template repository vs. addon
* Web, Windows, Linux and macOS exports configured for maximum jam
* Premade basic UI for main menu, pause menu, credits, and settings
* [G.U.I.D.E](https://godotneers.github.io/G.U.I.D.E/) for input with remapping
* Settings persisted across sessions (where `user://` filesystem is writable)
* Keyboard and controller support for all template UI and touchscreen via [Godot's emulate mouse from touch setting](https://docs.godotengine.org/en/stable/classes/class_projectsettings.html#class-projectsettings-property-input-devices-pointing-emulate-mouse-from-touch)
* ATTRIBUTION.md for in-game credits (inspired by [Maaack](https://github.com/Maaack/Godot-Game-Template/blob/main/ATTRIBUTION.md)'s approach)
* CI/CD for automatic Itch.io updates adapted from [abarichello/godot-ci](https://github.com/abarichello/godot-ci)
* [TODO Manager](https://github.com/OrigamiDev-Pete/TODO_Manager) included and todos added for setting up a new project

Don't just settle for the first template you find! Compare the alternatives and decide which best fits your desired feature set, coding style, and approach to game development.

Alternatives:
* [https://github.com/Maaack/Godot-Game-Template](https://github.com/Maaack/Godot-Game-Template)
* [https://github.com/bitbrain/godot-gamejam](https://github.com/bitbrain/godot-gamejam)
* [https://github.com/nezvers/Godot-GameTemplate](https://github.com/nezvers/Godot-GameTemplate)
* [And many more...](https://godotengine.org/asset-library/asset?filter=template&category=&godot_version=&cost=&sort=updated)

This template is intended to be used at project start only. While it is possible to apply updates made to the template to projects created from earlier versions of the template, it is not designed for that. There are other templates that make upgrading much simpler--with other trade-offs, perhaps.

## Initial setup

There are a few ways to get started.
* "Use this template"
* Clone the repository
* Download a zip file of the source

## Main

Once the Godot project files are cloned locally, open `res://main.tscn` and `res://main.gd` and create your game!

## Folder structure

`res://autoloads/` contains scripts added to the Godot project's globals/autoloads.

`res://input/` contains a default G.U.I.D.E action and context mapping. See [G.U.I.D.E documentation](https://godotneers.github.io/G.U.I.D.E/) for how to add new actions, etc.

`res://media/` is intended for screenshots and other items used for documentation or the Itch.io page for the project.

`res://test/` holds automated test scripts and is not exported. 

`res://ui/` is where most of the template's work is done (details below).

`res://ui/game/` is intended for the game UI/HUD and what comes with the template should be replaced when building your project.

I recommend creating a `res://game` directory to hold the scenes for gameplay. It's up to your preference and the type of project whether the separation of `res://ui/game` and `res://game` makes sense.

## UI

The main UI scene treats its direct children as UI pages and components to show or hide. They might be an entire screen or just a widget in the corner. The main UI scene includes basic UI for all of the template's menus, a stub in-game UI with pause screen, and Maaack's [`ProjectUISoundController`](https://github.com/Maaack/Godot-UI-Sound-Controller).

Each UI "page" is contained in its own directory under `res://ui`. The `assets` folder is for non-scene/non-code files used in the UI. The `game` folder and its scene are intended for the UI (HUD) shown in gameplay only and 
```
└───ui
	├───assets
	│   ├───audio
	│   ├───fonts
	│   └───icons
	│       ├───input_devices
	│       └───notifications
	├───controls
	├───credits
	├───game
	├───how_to_play
	├───main_menu
	├───notifications
	├───pause_menu
	└───settings
```


The intended approach is to keep all UI in `res://ui/ui.tscn` and instantiate it as a child of every other scene. This is to allow settings and controls to be called from the pause menu.

The top-level UI is set `PROCESS_MODE_ALWAYS` with children inheriting the mode. The `InGameMenuOverlay` will appear when `get_tree().paused == true`. In games where pausing the tree should not hide the game area, either remove that node or have the `PauseMenu` show and hide the overaly.

The project default theme is `res://ui/ui_theme.tres` generated by [ThemeGen](https://github.com/Inspiaaa/ThemeGen) and `res://ui/ui_theme.gd`.

## UI Navigation

The template UI is designed to work with keyboard, controller, and touch input as well as mouse. `Ctrl+Tab` can be used to grab focus with the keyboard. Any controller input will grab focus (though this may need to be prevents for the game ui).

## Settings Persistence

Settings are saved automatically in `user://settings.cfg` and control mappings in `user://controls.tres`. Saving and loading are handled by `res://autoloads/settings.gd`.

The input icons are generated by G.U.I.D.E in a RichTextLabel. The buttons used for remapping use the theme generated by `res://ui/controls/remap_input_button_theme.gd`.

## _Todo_ and _Fixme_ comments

Stay organized with TODO and FIXME comments in scripts and markdown files. Add your own special comments per [TODO Manager](https://github.com/OrigamiDev-Pete/TODO_Manager)'s documentation.

## Tests

[gdUnit4](https://github.com/MikeSchulze/gdUnit4) is used for testing.

## CI/CD

The template includes [Github actions](https://docs.github.com/actions) for running tests and optionally deploying to itch.io. The tests workflow runs on every push to every branch. Deploy runs after successful test runs on the main branch.

On succesful export, and if configured, the deploy workflow uses [butler](https://itch.io/docs/butler/) to deploy the game to [itch.io](https://itch.io).  Setup these secrets in your Github repository to enable push:
* ITCHIO_USERNAME
* ITCHIO_GAME
* BUTLER_API_KEY
